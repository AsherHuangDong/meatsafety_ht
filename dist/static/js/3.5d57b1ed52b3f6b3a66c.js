webpackJsonp([3],{ANdG:function(e,t){},PjtD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return[{path:"/generalviewshow",name:"generalviewshow",permId:1,show:!1,title:"概览"},{path:"/usermanageshow",name:"usermanageshow",permId:2,show:!1,title:"用户管理"},{path:"/grouplist",name:"grouplist",permId:3,show:!1,title:"小组管理"},{path:"/noticelist",name:"noticelist",permId:4,show:!1,title:"公告通知"},{path:"/datamanage",name:"datamanage",permId:7,show:!1,title:"数据管理",children:[{path:"/literaturedata",name:"literaturedata",permId:5,show:!1,title:"文献管理"},{path:"/filleddata",name:"filleddata",permId:6,show:!1,title:"填报管理"}]},{path:"/templatemanage",name:"templatemanage",permId:10,show:!1,title:"模板管理",children:[{path:"/kindmanage",name:"kindmanage",permId:8,show:!1,title:"分类管理"},{path:"/targetlist",name:"targetlist",permId:9,show:!1,title:"指标列表"}]},{path:"/permManager",name:"permManager",permId:13,show:!1,title:"权限管理",children:[{path:"/roleManager",name:"roleManager",permId:12,show:!1,title:"角色管理"},{path:"/staffManager",name:"staffManager",permId:11,show:!1,title:"人员管理"}]},{path:"/numberrangelist",name:"numberrangelist",permId:14,show:!1,title:"设置"}]},n={name:"index",data:function(){return{presentPassword:"",presentPassword1:"",originalPassword:"",showModal:!1,userName:sessionStorage.getItem("nickname"),height:0,menuList:[],name:"",openNames:[]}},watch:{$route:function(e,t){this.name=this.$route.path.substr(1)}},methods:{cancel:function(){this.showModal=!1},sure:function(){var e=this;if(!this.originalPassword)return this.$Message.error("请输入原密码"),!1;if(!this.presentPassword)return this.$Message.error("请输入新密码"),!1;if(!this.presentPassword1)return this.$Message.error("请输入确认密码"),!1;if(this.presentPassword!=this.presentPassword1)return this.$Message.error("两次密码输入不一致"),!1;var t=new FormData;t.append("originalPassword",this.originalPassword),t.append("presentPassword",this.presentPassword),t.append("adminId",sessionStorage.getItem("adminId")),this.$axios.post("/api/admin/updatePasswordByAdmin",t).then(function(t){100==t.data.code?(e.$Message.success("密码修改成功！"),e.showModal=!1):e.$Message.error(t.data.msg)})},getPage:function(e){2==e?this.$router.push("/"):1==e&&(this.showModal=!0),console.log("name",e)},selectMenu:function(e){this.$router.push("/"+e)},getSideBar:function(){var e=this,t=s();console.log("M",JSON.parse(sessionStorage.getItem("permList")));var a=JSON.parse(sessionStorage.getItem("permList"));"/generalviewshow"!==a[0].permValue&&this.$router.push(a[0].permValue);for(var n=[],r=0;r<a.length;r++)n.push(a[r].permId);!function e(t){for(var a=0;a<t.length;a++)t[a].show=-1!==n.indexOf(t[a].permId),t[a].children&&e(t[a].children)}(t),this.menuList=t,console.log("menu",this.menuList),this.menuList.forEach(function(t){t.children&&t.children.forEach(function(a){e.$route.path.substr(1)==a.name&&(e.openNames=[t.name],e.$nextTick(function(){e.$refs.side_menu.updateOpened()}))})})}},mounted:function(){this.name=this.$route.path.substr(1);var e=this;e.height=document.documentElement.clientHeight-2,window.onresize=function(){e.height=document.documentElement.clientHeight-2},this.getSideBar()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout"},[a("Modal",{staticStyle:{padding:"0 20px 20px"},attrs:{width:"600","mask-closable":!1,closable:!1},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[e._v("修改密码")]),e._v(" "),a("Form",{ref:"form",staticClass:"form",attrs:{"label-position":"right","label-width":80}},[a("FormItem",{attrs:{label:"原密码：",prop:"name"}},[a("Input",{attrs:{placeholder:"输入当前密码"},model:{value:e.originalPassword,callback:function(t){e.originalPassword=t},expression:"originalPassword"}})],1),e._v(" "),a("FormItem",{attrs:{label:"新密码：",prop:"name"}},[a("Input",{attrs:{placeholder:"设置新密码"},model:{value:e.presentPassword,callback:function(t){e.presentPassword=t},expression:"presentPassword"}})],1),e._v(" "),a("FormItem",{attrs:{label:"确认密码：",prop:"name"}},[a("Input",{attrs:{placeholder:"确认密码"},model:{value:e.presentPassword1,callback:function(t){e.presentPassword1=t},expression:"presentPassword1"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.sure}},[e._v("确定")])],1)],1),e._v(" "),a("Layout",{style:{height:e.height+"px",overflow:"visible"}},[a("Header",{staticClass:"header",staticStyle:{background:"#515a6e"}},[a("Menu",{staticStyle:{background:"#515a6e"},attrs:{mode:"horizontal"},on:{"on-select":e.getPage}},[a("div",{staticClass:"layout-logo"},[e._v("肉品品质安全数据库管理后台")]),e._v(" "),a("div",{staticClass:"layout-nav"},[a("Submenu",{attrs:{name:"userInfo"}},[a("template",{staticStyle:{color:"#fff"},slot:"title"},[e._v(e._s(e.userName))]),e._v(" "),a("MenuItem",{attrs:{name:"1"}},[e._v("修改密码")]),e._v(" "),a("MenuItem",{attrs:{name:"2"}},[e._v("退出登录")])],2)],1)])],1),e._v(" "),a("Layout",[a("Sider",{style:{background:"#515a6e"},attrs:{"hide-trigger":""}},[a("Menu",{ref:"side_menu",attrs:{theme:"dark",width:"auto",accordion:"","active-name":e.name,"open-names":e.openNames},on:{"on-select":e.selectMenu}},[e._l(e.menuList,function(t){return!t.children&&14!=t.permId&&t.show?a("MenuItem",{key:t.name,attrs:{name:t.name}},[e._v(e._s(t.title))]):e._e()}),e._v(" "),e._l(e.menuList,function(t){return t.children&&t.show?a("Submenu",{key:t.name,attrs:{name:t.name}},[a("template",{slot:"title"},[e._v(e._s(t.title))]),e._v(" "),e._l(t.children,function(t,s){return a("div",{key:s},[!t.children&&t.show?a("MenuItem",{key:t.name,attrs:{name:t.name}},[e._v(e._s(t.title))]):e._e()],1)})],2):e._e()}),e._v(" "),e._l(e.menuList,function(t){return!t.children&&14==t.permId&&t.show?a("MenuItem",{key:t.name,attrs:{name:t.name}},[e._v(e._s(t.title))]):e._e()})],2)],1),e._v(" "),a("Layout",{style:{padding:"0 24px 24px"}},[a("Breadcrumb",{style:{margin:"12px 0"}},[a("BreadcrumbItem",[a("div",{staticStyle:{height:"18px",width:"1px",border:"3px solid #515a6e",display:"inline-block"}}),e._v(" "),a("span",{staticStyle:{height:"18px","line-height":"18px","font-size":"18px",display:"inline-block"}},[e._v(e._s(e.$route.meta.title))])])],1),e._v(" "),a("Content",{style:{padding:"24px",minHeight:"280px",height:"100%",background:"#fff"}},[a("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,r,!1,function(e){a("Yk6i"),a("ANdG")},"data-v-5d640b9c",null);t.default=i.exports},Yk6i:function(e,t){}});
//# sourceMappingURL=3.5d57b1ed52b3f6b3a66c.js.map