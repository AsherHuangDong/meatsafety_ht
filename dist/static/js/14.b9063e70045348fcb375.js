webpackJsonp([14],{NN5D:function(e,t){},nkgr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("7+uW");var i={name:"treeTable",data:function(){var e=this;return{showHeader:!1,columns:[{title:"序号",key:"row.indexTypeId",align:"center",width:50},{type:"selection",align:"center",width:100},{type:"index",title:"序号",key:"",align:"center",width:100},{title:"分类名称",key:"indexTypeName",align:"center"},{title:"是否可见",key:"",align:"center",render:function(t,n){return t("i-switch",{props:{value:n.row.isVisible,"true-value":1,"false-value":2,size:"large"},on:{"on-change":function(t){var i={id:n.row.indexTypeId,status:n.row.isVisible};e.$emit("changeStatus",i)}},scopedSlots:{open:function(){return t("span","是")},close:function(){return t("span","否")}}})}},{title:"创建时间",key:"cTime",align:"center"},{title:"操作",key:"",align:"center",render:function(t,n){return t("div",{},[t("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){e.$router.push({path:"/kindchildedit",query:{parents:e.id,indexTypeId:n.row.indexTypeId,indexTypeName:n.row.indexTypeName}})}}},"修改"),t("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){e.$emit("del",n.row.indexTypeId)}}},"删除"),t("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){e.$emit("moveChild",{indexTypeId:n.row.indexTypeId,move:1})}}},"上移"),t("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){e.$emit("moveChild",{indexTypeId:n.row.indexTypeId,move:2})}}},"下移")])}}]}},props:["row","id"],methods:{getSelect:function(){},clickRow:function(e){this.$emit("childClick",e)}},mounted:function(){console.log(this.list)}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"table"},[t("Table",{attrs:{"show-header":this.showHeader,columns:this.columns,border:"",data:this.row},on:{"on-selection-change":this.getSelect}})],1)},staticRenderFns:[]};var a=n("VU/8")(i,o,!1,function(e){n("NN5D")},null,null).exports,s={data:function(){var e=this;return{msg:"",showData:!1,showDel:!1,hiddenData:!1,indexTypeIdList:[],page:1,pageSize:10,total:0,columns:[{type:"selection",align:"center",width:100},{type:"expand",width:50,render:function(t,n){return console.log("param",n),t(a,{props:{row:n.row.list,id:n.row.indexTypeId},on:{childClick:function(e){console.log("bbb",e)},del:function(t){e.indexTypeIdList=[t],e.showDel=!0},moveChild:function(t){e.move(t.indexTypeId,t.move)},changeStatus:function(t){e.indexTypeIdList=[t.id],e.toHidden(t.status)}}})}},{type:"index",title:"序号",key:"",align:"center",width:100},{title:"分类名称",key:"indexTypeName",align:"center"},{title:"是否可见",key:"",align:"center",render:function(t,n){return t("i-switch",{props:{value:n.row.isVisible,"true-value":1,"false-value":2,size:"large"},on:{"on-change":function(t){e.indexTypeIdList=[n.row.indexTypeId],e.toHidden(n.row.isVisible)}},scopedSlots:{open:function(){return t("span","是")},close:function(){return t("span","否")}}})}},{title:"创建时间",key:"cTime",align:"center"},{title:"操作",key:"",align:"center",render:function(t,n){return t("div",{},[t("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){e.$router.push({path:"/kindchildadd",query:{indexTypeId:n.row.indexTypeId}}),sessionStorage.setItem("list",e.list)}}},"新增子项"),t("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){e.$router.push({path:"/kindedit",query:{indexTypeId:n.row.indexTypeId,indexTypeName:n.row.indexTypeName}})}}},"修改"),t("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){e.showDel=!0,e.indexTypeIdList=[n.row.indexTypeId],console.log("111=",e.indexTypeIdList)}}},"删除"),t("a",{style:{color:"#00C1DE","margin-right":"10px",display:0==n.index?"none":"inline-block"},on:{click:function(){e.move(n.row.indexTypeId,1)}}},"上移"),t("a",{style:{color:"#00C1DE","margin-right":"10px",display:n.index==e.list.length-1?"none":"inline-block"},on:{click:function(){e.move(n.row.indexTypeId,2)}}},"下移")])}}],list:[]}},components:{treeTable:a},watch:{$route:function(e,t){if(console.log("from",t),"kindadd"!=t.name&&"kindedit"!=t.name||this.getData(),t.query.parents){var n={indexTypeId:t.query.parents};this.clickRow(n)}}},inject:["reload"],methods:{move:function(e,t){var n=this,i=new FormData;i.append("status",t),i.append("indexTypeId",e),this.$axios.post("/api/indexType/moveIndexTypeSort",i).then(function(e){if(100==e.data.code){var i="";i=1==t?"上移成功！":"下移成功！",n.$Message.success(i),n.getData()}else n.$Message.error(e.data.msg)})},getSelect:function(e){var t=this;this.indexTypeIdList=[],e.forEach(function(e){t.indexTypeIdList.push(e.indexTypeId)}),console.log("e",this.indexTypeIdList)},changePage:function(e){this.page=e,this.getData()},getChildList:function(e,t,n){var i=!0;e.forEach(function(e){e.indexTypeId==t&&(i=!1,e.list=n,e._expanded?e._expanded=!1:e._expanded=!0),i&&e.list&&e.list.length>0&&o(e.list,t,n)});var o=[];this.list.forEach(function(e){o.push(e)}),this.list=o,console.log(this.list)},clickRow:function(e){var t=this,n=e.indexTypeId,i=new FormData;i.append("indexTypeId",n),this.$axios.post("api/indexType/getIndexTypeChildListByParent",i).then(function(e){t.getChildList(t.list,n,e.data.data)})},getData:function(){var e=this,t=new FormData;t.append("page",this.page),t.append("pageSize",this.pageSize),this.$axios.post("/api/indexType/getIndexTypeByPage",t).then(function(t){console.log(t),e.total=t.data.data.total,e.list=t.data.data.records})},add:function(){this.$router.push({path:"/kindadd"})},toDel:function(){if(0==this.indexTypeIdList.length)return this.$Message.error("请选择你要删除的数据"),!1;this.showDel=!0},del:function(){var e=this,t=new FormData,n=[];console.log("222==",this.indexTypeIdList),this.indexTypeIdList.forEach(function(e){n.push(e)}),console.log("222=",n),n=n.join(","),console.log(n),t.append("status",1),t.append("indexTypeIdList",n),this.$axios.post("/api/indexType/deleteIndexTypeByParent",t).then(function(t){100==t.data.code&&(e.$Message.success("删除成功！"),e.showDel=!1,e.indexTypeIdList=[],e.getData())})},toHidden:function(e){if(e)1==e?this.hiddenData=!0:2==e?this.showData=!0:this.hiddenData=!0;else{if(0==this.indexTypeIdList.length)return this.$Message.error("请选择你要隐藏的数据"),!1;this.hiddenData=!0}},hidden:function(){var e=this,t=new FormData,n=[];this.indexTypeIdList.forEach(function(e){n.push(e)}),n=n.join(","),console.log(n),t.append("status",2),t.append("indexTypeIdList",n),this.$axios.post("/api/indexType/deleteIndexTypeByParent",t).then(function(t){100==t.data.code&&(e.indexTypeIdList=[],e.getData(),e.showData&&e.$Message.success("已显示！"),e.hiddenData&&e.$Message.success("已隐藏！"),e.hiddenData=!1,e.showData=!1)})},cancel:function(){this.getData(),this.showDel=!1,this.hiddenData=!1,this.showData=!1}},mounted:function(){this.getData()}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"0 20px"}},[n("Row",[n("Col",{attrs:{span:"24"}},[n("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("新增项")]),e._v(" "),n("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.toDel}},[e._v("批量删除")]),e._v(" "),n("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.toHidden}},[e._v("批量隐藏")])],1)],1),e._v(" "),n("Row",[n("Table",{staticStyle:{"margin-top":"20px"},attrs:{columns:e.columns,border:"",data:e.list},on:{"on-selection-change":e.getSelect,"on-row-click":e.clickRow}})],1),e._v(" "),n("Row",[n("Col",{staticStyle:{"margin-top":"60px","margin-bottom":"100px","text-align":"center"},attrs:{span:"24"}},[n("Page",{attrs:{total:e.total,size:"small","show-total":""},on:{"on-change":e.changePage}})],1)],1),e._v(" "),n("router-view"),e._v(" "),n("Modal",{attrs:{width:"360","mask-closable":!1,closable:!1},model:{value:e.showDel,callback:function(t){e.showDel=t},expression:"showDel"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),e._v(" "),n("span",[e._v("是否删除数据？")])],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",[e._v("删除数据后将无法恢复")])]),e._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"error"},on:{click:e.del}},[e._v("删除")]),e._v(" "),n("Button",{staticStyle:{"margin-left":"40px"},on:{click:e.cancel}},[e._v("取消")])],1)]),e._v(" "),n("Modal",{attrs:{width:"360","mask-closable":!1,closable:!1},model:{value:e.hiddenData,callback:function(t){e.hiddenData=t},expression:"hiddenData"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),e._v(" "),n("span",[e._v("是否隐藏选中数据？")])],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",[e._v("隐藏数据后将无法查看")])]),e._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"error"},on:{click:e.hidden}},[e._v("隐藏")]),e._v(" "),n("Button",{staticStyle:{"margin-left":"40px"},on:{click:e.cancel}},[e._v("取消")])],1)]),e._v(" "),n("Modal",{attrs:{width:"360","mask-closable":!1,closable:!1},model:{value:e.showData,callback:function(t){e.showData=t},expression:"showData"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),e._v(" "),n("span",[e._v("是否显示选中数据？")])],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("p",[e._v("显示数据后将可以查看数据")])]),e._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"error"},on:{click:e.hidden}},[e._v("显示")]),e._v(" "),n("Button",{staticStyle:{"margin-left":"40px"},on:{click:e.cancel}},[e._v("取消")])],1)])],1)},staticRenderFns:[]},r=n("VU/8")(s,l,!1,null,null,null);t.default=r.exports}});
//# sourceMappingURL=14.b9063e70045348fcb375.js.map