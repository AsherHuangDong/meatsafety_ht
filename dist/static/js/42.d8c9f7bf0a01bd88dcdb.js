webpackJsonp([42],{"6qmz":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{row:{},selObj:{},showDel:!1,list:[],page:1,pageSize:10,total:0,pigBreed:"",referLiterature:"",columns:[{type:"index",title:"序号",key:"",align:"center",width:100},{title:"参考文献",key:"referLiterature",align:"center",width:300},{title:"猪种",key:"pigBreed",align:"center",width:100},{title:"纯种或杂交等信息",key:"typeName",align:"center",width:100},{title:"性别",key:"sexName",align:"center",width:80},{title:"饲养周期",key:"feedPeriod",align:"center",width:100},{title:"取样位置",key:"sampPoint",align:"center",width:100},{title:"产地",key:"place",align:"center",width:200},{title:"饲养信息",key:"feedInformation",align:"center",width:200},{title:"屠宰方式",key:"butcherWay",align:"center",width:200},{title:"冷却方式",key:"coolWay",align:"center",width:200},{title:"贮藏方式",key:"storeCondition",align:"center",width:200},{title:"运输条件",key:"transportationCondition",align:"center",width:200},{fixed:"right",title:"操作",key:"",slot:"update",width:200,align:"center"}]}},watch:{$route:function(t,e){console.log(e),"uploadfile"!=e.name&&"uploadedit"!=e.name||this.getdata()}},methods:{changePage:function(t){this.page=t,this.getdata()},update:function(t){this.row=t},opSelect:function(t){console.log(t),"file"===t&&this.$router.push({path:"/uploadfileedit",query:{id:this.row.literatureId}}),"hand"===t&&this.$router.push({path:"/handupload",query:{id:this.row.literatureId}})},toDel:function(t){this.showDel=!0,this.selObj=t},del:function(){var t=this,e=new FormData;e.append("literatureId",this.selObj.literatureId),this.$axios.post("/api/literature/deleteLiterature",e).then(function(e){100==e.data.code?(t.showDel=!1,t.$Message.success("删除成功！"),t.getdata()):t.$Message.error(e.data.msg)})},cancel:function(){this.showDel=!1},toDownLoad:function(t){window.location.href="/api/literatureExcel/exportExcel?literatureId="+t},getdata:function(){var t=this,e=new FormData;e.append("page",this.page),e.append("pageSize",this.pageSize),this.pigBreed&&e.append("pigBreed",this.pigBreed),this.referLiterature&&e.append("referLiterature",this.referLiterature),this.$axios.post("/api/literature/getLiteratureByPage",e).then(function(e){t.list=e.data.data.records,t.total=e.data.data.total})},upLoadFile:function(){this.$router.push({path:"/uploadfile"})}},mounted:function(){this.getdata()}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{padding:"0 20px"}},[i("Row",[i("Col",{attrs:{span:"18"}},[i("span",[t._v("猪种名称")]),t._v(" "),i("Input",{staticStyle:{width:"200px","margin-right":"20px"},model:{value:t.pigBreed,callback:function(e){t.pigBreed=e},expression:"pigBreed"}}),t._v(" "),i("span",[t._v("参考文献")]),t._v(" "),i("Input",{staticStyle:{width:"200px"},model:{value:t.referLiterature,callback:function(e){t.referLiterature=e},expression:"referLiterature"}})],1),t._v(" "),i("Col",{staticStyle:{"text-align":"right"},attrs:{span:"6"}},[i("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"info"},on:{click:t.getdata}},[t._v("搜索")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.upLoadFile}},[t._v("上传")])],1)],1),t._v(" "),i("Row",[i("Table",{staticStyle:{"margin-top":"20px"},attrs:{columns:t.columns,border:"",data:t.list},scopedSlots:t._u([{key:"update",fn:function(e){var a=e.row;return e.index,[i("Button",{staticStyle:{"margin-top":"2px",width:"60px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.toDownLoad(a.literatureId)}}},[t._v("下载")]),t._v(" "),i("Button",{staticStyle:{"margin-top":"2px",width:"60px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.toDel(a)}}},[t._v("删除")]),t._v(" "),i("br"),t._v(" "),i("Dropdown",{staticStyle:{"margin-top":"4px","margin-bottom":"2px"},attrs:{trigger:"click"},on:{"on-click":t.opSelect}},[i("Button",{staticStyle:{width:"60px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.update(a)}}},[t._v("\n            更新数据\n            "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:"file"}},[t._v("上传文件")]),t._v(" "),i("DropdownItem",{attrs:{name:"hand"}},[t._v("手动上传")])],1)],1)]}}])})],1),t._v(" "),i("Row",[i("Col",{staticStyle:{"margin-top":"60px","margin-bottom":"100px","text-align":"center"},attrs:{span:"24"}},[i("Page",{attrs:{total:t.total,size:"small","show-total":""},on:{"on-change":t.changePage}})],1)],1),t._v(" "),i("Modal",{attrs:{width:"360","mask-closable":!1,closable:!1},model:{value:t.showDel,callback:function(e){t.showDel=e},expression:"showDel"}},[i("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),i("span",[t._v("是否删除该条数据？")])],1),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("p",[t._v("删除数据后将无法恢复")])]),t._v(" "),i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"error"},on:{click:t.del}},[t._v("删除")]),t._v(" "),i("Button",{staticStyle:{"margin-left":"40px"},on:{click:t.cancel}},[t._v("取消")])],1)]),t._v(" "),i("router-view")],1)},staticRenderFns:[]},n=i("VU/8")(a,r,!1,null,null,null);e.default=n.exports}});
//# sourceMappingURL=42.d8c9f7bf0a01bd88dcdb.js.map