webpackJsonp([41],{DYDv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){var t=this;return{page:1,pageSize:10,total:0,indexName:"",indexTypeId:-1,list:[],typeList:[],showDel:!1,selObj:{},columns:[{title:"序号",key:"sort",align:"center",width:100},{title:"指标名称",key:"indexName",align:"center"},{title:"创建时间",key:"cTime",align:"center"},{title:"操作",key:"",align:"center",render:function(e,a){return e("div",{},[e("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){t.$router.push({path:"/targetedit",query:{id:a.row.indexId,indexName:a.row.indexName,indexTypeId:a.row.indexTypeId}})}}},"修改"),e("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){t.showDel=!0,t.selObj=a.row}}},"删除"),e("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){t.move(a.row.indexId,1)}}},"上移"),e("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){t.move(a.row.indexId,2)}}},"下移")])}}]}},watch:{$route:function(t,e){console.log(e),"targetadd"!=e.name&&"targetedit"!=e.name||this.getData()}},methods:{move:function(t,e){var a=this,n=new FormData;n.append("move",e),n.append("indexId",t),this.$axios.post("/api/indexList/moveIndexList",n).then(function(t){if(100==t.data.code){var n="";n=1==e?"上移成功！":"下移成功！",a.$Message.success(n),a.getData()}else a.$Message.error(t.data.msg)})},changePage:function(t){this.page=t,this.getData()},getData:function(){var t=this,e=new FormData;e.append("page",this.page),e.append("pageSize",this.pageSize),this.indexName&&e.append("indexName",this.indexName),this.indexTypeId&&-1!=this.indexTypeId&&e.append("indexTypeId",this.indexTypeId),this.$axios.post("/api/indexList/getIndexListByPage",e).then(function(e){console.log(e),t.total=e.data.data.total,t.list=e.data.data.records})},getType:function(){var t=this;this.$axios.post("/api/indexType/getIndexTypeByList",{}).then(function(e){100==e.data.code&&(t.typeList=e.data.data)})},add:function(){this.$router.push({path:"/targetadd"})},del:function(){var t=this,e=new FormData;e.append("indexId",this.selObj.indexId),this.$axios.post("/api/indexList/deleteIndexList",e).then(function(e){t.$Message.success("删除成功！"),t.showDel=!1,t.getData()})},cancel:function(){this.showDel=!1}},mounted:function(){this.getType(),this.getData()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"0 20px"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("span",[t._v("指标名称")]),t._v(" "),a("Input",{staticStyle:{width:"200px","margin-right":"20px"},model:{value:t.indexName,callback:function(e){t.indexName=e},expression:"indexName"}}),t._v(" "),a("span",[t._v("所属分类")]),t._v(" "),a("Select",{staticStyle:{width:"200px"},model:{value:t.indexTypeId,callback:function(e){t.indexTypeId=e},expression:"indexTypeId"}},[a("Option",{attrs:{value:-1}},[t._v("全部")]),t._v(" "),t._l(t.typeList,function(e){return a("Option",{key:e.indexTypeId,attrs:{value:e.indexTypeId}},[t._v(t._s(e.parentName?e.parentName+"-":"")+t._s(e.indexTypeName))])})],2)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"8"}},[a("Button",{staticStyle:{"margin-right":"40px"},attrs:{type:"primary"},on:{click:t.getData}},[t._v("搜索")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新增")])],1)],1),t._v(" "),a("Row",[a("Table",{staticStyle:{"margin-top":"20px"},attrs:{columns:t.columns,border:"",data:t.list}})],1),t._v(" "),a("Row",[a("Col",{staticStyle:{"margin-top":"60px","margin-bottom":"100px","text-align":"center"},attrs:{span:"24"}},[a("Page",{attrs:{total:t.total,size:"small","show-total":""},on:{"on-change":t.changePage}})],1)],1),t._v(" "),a("Modal",{attrs:{width:"360","mask-closable":!1,closable:!1},model:{value:t.showDel,callback:function(e){t.showDel=e},expression:"showDel"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),a("span",[t._v("是否删除该条数据？")])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("p",[t._v("删除数据后将无法恢复")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error"},on:{click:t.del}},[t._v("删除")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"40px"},on:{click:t.cancel}},[t._v("取消")])],1)]),t._v(" "),a("router-view")],1)},staticRenderFns:[]},o=a("VU/8")(n,i,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=41.7394945b7b0664976ec7.js.map