webpackJsonp([44],{T8CE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){var e=this;return{index:0,datetime:[],typeList:[],total:0,obj:{page:1,pageSize:10,keyword:"",breedType:[],animalSex:[],startTime:"",endTime:"",indexIdList:[]},allBreedType:!1,allAnimalSex:!1,indexId:!1,list:[],columns:[{type:"index",title:"序号",key:"",align:"center",width:100},{title:"参考文献",key:"referLiterature",align:"center",width:300},{title:"猪种",key:"pigBreed",align:"center",width:100},{title:"纯种或杂交等信息",key:"",align:"center",width:100,render:function(e,t){return e("div",{},1==t.row.breedType?"纯交":"杂交")}},{title:"性别",key:"",align:"center",width:80,render:function(e,t){return e("div",{},1==t.row.animalSex?"公猪":2==t.row.animalSex?"阉公猪":"母猪")}},{title:"饲养周期",key:"feedPeriod",align:"center",width:100},{title:"取样位置",key:"sampPoint",align:"center",width:100},{title:"产地",key:"place",align:"center",width:200},{title:"饲养信息",key:"feedInformation",align:"center",width:200},{title:"屠宰方式",key:"butcherWay",align:"center",width:200},{title:"冷却方式",key:"coolWay",align:"center",width:200},{title:"贮藏方式",key:"storeCondition",align:"center",width:200},{title:"运输条件",key:"transportationCondition",align:"center",width:200},{fixed:"right",title:"操作",key:"",width:200,align:"center",render:function(t,i){return t("div",{},[t("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){e.toDownLoad(i.row.literatureId)}}},"下载")])}}]}},methods:{toDownLoad:function(e){window.location.href="/api/literatureExcel/exportExcel?literatureId="+e},allLoad:function(){var e=this;this.index<this.list.length?(window.location.href="/api/literatureExcel/exportExcel?literatureId="+this.list[this.index].literatureId,setTimeout(function(){e.index=e.index+1,e.allLoad()},1e3)):(this.index=0,this.$Message.success("下载完成！"))},changePage:function(e){this.obj.page=e},changeBreedType:function(e){this.obj.breedType=e?["1","2"]:[]},getBreedType:function(e){console.log("e",e),2==e.length?this.allBreedType=!0:this.allBreedType=!1,this.getData()},changeAnimalSex:function(e){this.obj.animalSex=e?["1","2","3"]:[],this.getData()},getAnimalSex:function(e){3==e.length?this.allAnimalSex=!0:this.allAnimalSex=!1,this.getData()},changeIndexId:function(e){var t=this,i=this.typeList;i.forEach(function(a,n){e.indexTypeId==a.indexTypeId&&(a.all?(a.indexLists.forEach(function(e){a.indexIdList.push(e.indexId)}),a.all=!0,console.log("arr",i)):(a.indexIdList.splice(0,a.indexIdList.length),a.all=!1),t.typeList=i,console.log("typeList",i),t.getData())})},getIndexId:function(e,t){var i=this.typeList;i.forEach(function(i,a){if(e.indexTypeId==i.indexTypeId){var n=!1;console.log("item.indexIdList",i.indexIdList),i.indexIdList.forEach(function(e,i){t==e&&(n=!0)}),n||i.indexIdList.push(t),i.indexIdList.length!=i.indexLists.length?i.all=!1:i.all=!0}}),this.typeList=i,console.log("this.typeList",this.typeList),this.getData()},getType:function(){var e=this;this.$axios.post("/api/literature/getIndexTypeAndIndexList",{}).then(function(t){100==t.data.code&&(e.typeList=t.data.data,e.typeList.forEach(function(e){e.all=!1,e.indexIdList=[]}))})},changeDate:function(){this.getData()},getData:function(){var e=this,t=new FormData;t.append("page",this.obj.page),t.append("pageSize",this.obj.pageSize),this.typeList.forEach(function(t){t.indexIdList.forEach(function(t){e.obj.indexIdList.push(t)})}),t.append("indexIdList",this.obj.indexIdList.join(",")),t.append("animalSex",this.obj.animalSex.join(",")),this.obj.keyword&&t.append("keyword",this.obj.keyword),this.datetime[0]&&this.datetime[1]&&(t.append("startTime",this.datetime[0].valueOf()),t.append("endTime",this.datetime[1].valueOf())),this.$axios.post("/api/literature/getLiteratureByFillPage",t).then(function(t){e.obj.indexIdList=[],e.list=t.data.data.records,e.total=t.data.data.total})}},mounted:function(){this.getType(),this.getData()}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Row",[i("Col",[e._v("\n      搜索：\n      "),i("Input",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:e.obj.keyword,callback:function(t){e.$set(e.obj,"keyword",t)},expression:"obj.keyword"}}),e._v(" "),i("Button",{staticStyle:{"border-radius":"0",height:"32px","margin-right":"10px"},attrs:{type:"info"},on:{click:e.getData}},[e._v("搜索")]),e._v(" "),i("span",[e._v("( 提示：支持多关键词搜索，不同关键词中间用分号隔开 )")])],1)],1),e._v(" "),i("br"),e._v(" "),i("Row",[i("Col",[e._v("\n      更新时间：\n      "),i("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange",placeholder:"Select date and time"},on:{"on-change":e.changeDate},model:{value:e.datetime,callback:function(t){e.datetime=t},expression:"datetime"}})],1)],1),e._v(" "),i("br"),e._v(" "),i("Row",[i("Col",{attrs:{span:"4"}},[e._v("纯/杂交")]),e._v(" "),i("Col",{staticStyle:{display:"flex"},attrs:{span:"20"}},[i("Checkbox",{attrs:{label:"-1"},on:{"on-change":e.changeBreedType},model:{value:e.allBreedType,callback:function(t){e.allBreedType=t},expression:"allBreedType"}},[i("span",[e._v("全选")])]),e._v(" "),i("CheckboxGroup",{on:{"on-change":e.getBreedType},model:{value:e.obj.breedType,callback:function(t){e.$set(e.obj,"breedType",t)},expression:"obj.breedType"}},[i("Checkbox",{attrs:{label:"1"}},[i("span",[e._v("纯种")])]),e._v(" "),i("Checkbox",{attrs:{label:"2"}},[i("span",[e._v("杂交")])])],1)],1)],1),e._v(" "),i("br"),e._v(" "),i("Row",[i("Col",{attrs:{span:"4"}},[e._v("性别")]),e._v(" "),i("Col",{staticStyle:{display:"flex"},attrs:{span:"20"}},[i("Checkbox",{attrs:{label:"-1"},on:{"on-change":e.changeAnimalSex},model:{value:e.allAnimalSex,callback:function(t){e.allAnimalSex=t},expression:"allAnimalSex"}},[i("span",[e._v("全选")])]),e._v(" "),i("CheckboxGroup",{on:{"on-change":e.getAnimalSex},model:{value:e.obj.animalSex,callback:function(t){e.$set(e.obj,"animalSex",t)},expression:"obj.animalSex"}},[i("Checkbox",{attrs:{label:"1"}},[i("span",[e._v("公猪")])]),e._v(" "),i("Checkbox",{attrs:{label:"2"}},[i("span",[e._v("阉公猪")])]),e._v(" "),i("Checkbox",{attrs:{label:"3"}},[i("span",[e._v("母猪")])])],1)],1)],1),e._v(" "),i("br"),e._v(" "),e._l(e.typeList,function(t){return[t.indexLists?i("Row",{staticStyle:{"margin-bottom":"50px"}},[t.indexLists?i("div",[i("Col",{attrs:{span:"4"}},[e._v(e._s(t.parentName?t.parentName+"-":"")+e._s(t.indexTypeName))]),e._v(" "),i("Col",{staticStyle:{display:"flex","flex-wrap":"wrap"},attrs:{span:"20"}},[i("Checkbox",{attrs:{label:"-1"},on:{"on-change":function(i){return e.changeIndexId(t)}},model:{value:t.all,callback:function(i){e.$set(t,"all",i)},expression:"item.all"}},[i("span",[e._v("全选")])]),e._v(" "),e._l(t.indexLists,function(a,n){return i("CheckboxGroup",{key:n,on:{"on-change":function(i){return e.getIndexId(t,a.indexId)}},model:{value:t.indexIdList,callback:function(i){e.$set(t,"indexIdList",i)},expression:"item.indexIdList"}},[i("Checkbox",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{label:a.indexId}},[i("span",[e._v(e._s(a.indexName))])])],1)})],2)],1):e._e()]):e._e()]}),e._v(" "),i("br"),e._v(" "),i("br"),e._v(" "),i("Row",[i("Col",{attrs:{span:"4"}},[e._v("搜索结果")]),e._v(" "),i("Col",{staticStyle:{"text-align":"right"},attrs:{span:"20"}},[i("Button",{attrs:{type:"info"},on:{click:e.allLoad}},[e._v("全部下载")])],1)],1),e._v(" "),i("Row",[i("Table",{staticStyle:{"margin-top":"20px"},attrs:{columns:e.columns,border:"",data:e.list}})],1),e._v(" "),i("Row",[i("Col",{staticStyle:{"margin-top":"40px","margin-bottom":"40px","text-align":"center"},attrs:{span:"24"}},[i("Page",{attrs:{total:e.total,size:"small","show-total":""},on:{"on-change":e.changePage}})],1)],1)],2)},staticRenderFns:[]},l=i("VU/8")(a,n,!1,null,null,null);t.default=l.exports}});
//# sourceMappingURL=44.96e4de2913af2dd27663.js.map