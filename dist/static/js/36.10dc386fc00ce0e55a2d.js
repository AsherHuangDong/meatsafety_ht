webpackJsonp([36],{T8CE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),l={inject:["reload"],name:"filloutDataSearch",data:function(){var e=this;return{userType:2,modal:!1,loading:!1,formValidate:{keyword:"",breedType:[],animalSex:[],startDate:"",endDate:"",indexIdList:[],date:"",page:1,pageSize:10},checkAll1:!1,checkAll2:!1,typeList:[],notOpen:[],allData:0,notOpenData:0,columns1:[{title:"序号",align:"center",width:50,render:function(t,i){return t("span",i.index+(e.formValidate.page-1)*e.formValidate.pageSize+1)}},{title:"上传者",align:"center",key:"name",ellipsis:!0,width:66},{title:"参考文献",align:"center",width:163,ellipsis:!0,key:"referLiterature"},{title:"猪种",align:"center",key:"pigBreed",ellipsis:!0,width:66},{title:"纯/杂种",align:"center",key:"typeName",ellipsis:!0,width:66},{title:"性别",align:"center",key:"sexName",ellipsis:!0,width:50},{title:"饲养周期",align:"center",width:80,ellipsis:!0,key:"feedPeriod"},{title:"取样位置",align:"center",width:80,ellipsis:!0,key:"sampPoint"},{title:"产地",align:"center",width:80,ellipsis:!0,key:"place"},{title:"饲养信息",align:"center",width:80,ellipsis:!0,key:"feedInformation"},{title:"屠宰方式",align:"center",width:80,ellipsis:!0,key:"butcherWay"},{title:"冷却方式",align:"center",ellipsis:!0,width:66,key:"coolWay"},{title:"贮藏时间",align:"center",ellipsis:!0,width:66,key:"storeCondition"},{title:"运输条件",align:"center",width:66,ellipsis:!0,key:"transportationCondition"},{title:"操作",align:"center",ellipsis:!0,width:50,slot:"download"}],data1:[],total:0,downloadList:[],index:0,compareList:[]}},methods:{changePage:function(e){this.formValidate.page=e,this.getData()},changePageSize:function(e){this.formValidate.pageSize=e,this.getData()},getMore:function(e){var t=document.getElementById("getAttr"+e),i=document.getElementById("more"+e);"hidden"==i.style.overflow?(i.style.overflow="visible",i.style.height="auto",t.innerText="收起"):(i.style.overflow="hidden",i.style.height="70px",t.innerText="查看更多选项")},getData:function(){var e=this;this.loading=!0;var t=new FormData;t.append("page",this.formValidate.page),t.append("pageSize",this.formValidate.pageSize),this.typeList.forEach(function(t){t.indexIdList.forEach(function(t){e.formValidate.indexIdList.push(t)})}),console.log(this.formValidate.indexIdList),t.append("indexIdList",this.formValidate.indexIdList.join(",")),3==this.formValidate.breedType.length?t.append("breedType",""):t.append("breedType",this.formValidate.breedType.join(",")),4==this.formValidate.animalSex.length?t.append("animalSex",""):t.append("animalSex",this.formValidate.animalSex.join(",")),this.formValidate.keyword&&t.append("keyword",this.formValidate.keyword),this.formValidate.startDate&&t.append("startTime",this.formValidate.startDate.valueOf()),this.formValidate.endDate&&t.append("endTime",this.formValidate.endDate.valueOf()),this.$axios.post("/api/literature/getLiteratureByFillPage",t).then(function(t){e.formValidate.indexIdList=[],e.data1=null==t.data.data?[]:t.data.data.records,e.total=null==t.data.data?0:t.data.data.total,0!=e.data1.length&&e.data1.forEach(function(t){e.downloadList.push(t.literatureId)}),e.loading=!1})},handleCheckAll1:function(){this.checkAll1=!this.checkAll1,this.checkAll1?this.formValidate.breedType=[1,2,4]:this.formValidate.breedType=[]},checkAllGroupChange1:function(e){console.log(e),2===e.length?this.checkAll1=!0:this.checkAll1=!1},handleCheckAll2:function(){this.checkAll2=!this.checkAll2,this.checkAll2?this.formValidate.animalSex=[1,2,3,4]:this.formValidate.animalSex=[]},checkAllGroupChange2:function(e){console.log(e),3===e.length?this.checkAll2=!0:this.checkAll2=!1},getType:function(){var e=this;this.$axios.post("/api/literature/getIndexTypeAndIndexList",{}).then(function(t){var i={},a=1;t.data.data.forEach(function(t){null!==t.indexLists&&("其他指标"==t.indexTypeName?(i=t,a=2):e.typeList.push(t))}),2==a&&e.typeList.push(i),console.log(e.typeList),e.typeList.forEach(function(e){e.all=!1,e.indexIdList=[],e.indexLists.forEach(function(e){e.checked=!1})});var l=[];e.typeList.forEach(function(e){null==e.parentName&&l.push(e),null!=e.parentName&&(e.checked=!1)}),l.forEach(function(t){e.typeList.forEach(function(e){e.parentName==t.indexTypeName&&t.indexLists.push(e)})}),console.log("indexList",l),e.typeList=JSON.parse(n()(l)),console.log("typeList",e.typeList)})},changeIndexId:function(e){var t=this,i=this.typeList;i.forEach(function(a,n){e.indexTypeId==a.indexTypeId&&(a.all?(a.indexLists.forEach(function(e){e.checked=!0,e.indexTypeName?e.indexLists.forEach(function(e){a.indexIdList.push(e.indexId),e.checked=!0}):a.indexIdList.push(e.indexId)}),a.all=!0,console.log("arr",i)):(a.indexIdList.splice(0,a.indexIdList.length),a.indexLists.forEach(function(e){e.checked=!1,e.indexTypeName&&e.indexLists.forEach(function(e){e.checked=!1})}),a.all=!1),t.typeList=i,console.log("typeList",t.typeList))})},getIndexId:function(e,t){var i=this.typeList;console.log(t),i.forEach(function(i,a){e.indexTypeId==i.indexTypeId&&(e.indexLists.forEach(function(e,a){t==e.indexId&&(e.checked?i.indexIdList.push(t):i.indexIdList.splice(i.indexIdList.findIndex(function(e){return e===t}),1))}),console.log(e.indexLists),i.indexIdList.length!=i.indexLists.length?i.all=!1:i.all=!0)}),this.typeList=i,console.log("this.typeList",this.typeList)},getIndexId1:function(e,t){var i=this.typeList;console.log(t),i.forEach(function(i,a){e.indexTypeId==i.indexTypeId&&(e.indexLists.forEach(function(e,a){t==e.indexTypeId&&(e.checked?e.indexLists.forEach(function(e){i.indexIdList.push(e.indexId),e.checked=!0}):e.indexLists.forEach(function(e){i.indexIdList.splice(i.indexIdList.findIndex(function(t){return t==e.indexId}),1),e.checked=!1}))}),console.log(e.indexLists),i.indexIdList.length!=i.indexLists.length?i.all=!1:i.all=!0)}),this.typeList=i,console.log("this.typeList",this.typeList)},getIndexId2:function(e,t,i,a){var n=this.typeList;console.log(a),console.log(t.checked),n.forEach(function(t,n){e.indexTypeId==t.indexTypeId&&e.indexLists.forEach(function(e,n){e.indexTypeId==i&&e.indexLists.forEach(function(e){a==e.indexId&&(e.checked?t.indexIdList.push(a):t.indexIdList.splice(t.indexIdList.findIndex(function(e){return e===a}),1))})})}),this.typeList=n,console.log("this.typeList",this.typeList)},changeStartDate:function(){},changeEndDate:function(){},download:function(e){window.location.href="/api/literatureExcel/exportExcel?literatureId="+e,this.getDownload(e)},downloadMore:function(){var e=this;console.log(this.downloadList),0!=this.downloadList.length?this.index<this.downloadList.length?(window.location.href="/api/literatureExcel/exportExcel?literatureId="+this.downloadList[this.index],this.getDownload(this.downloadList[this.index]),setTimeout(function(){e.index=e.index+1,e.downloadMore()},1e3)):(this.index=0,this.$Message.success("下载完成！")):this.$Message.info("您还没有选择要下载的数据")},getDownload:function(e){this.$axios.get("/api/literatureExcel/exportExcel?literatureId="+e).then(function(e){console.log(e)})}},mounted:function(){this.getType(),this.getData()}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"fillout"}},[i("div",[i("Form",{ref:"formValidate",attrs:{model:e.formValidate,"label-width":120}},[i("FormItem",{attrs:{prop:"keyword"}},[i("template",{slot:"label"},[i("span",[e._v("\n            搜索\n            "),i("span",{staticStyle:{color:"#FC0202"}},[e._v("*")])])]),e._v(" "),i("Row",[i("Col",{attrs:{span:"10"}},[i("Input",{staticStyle:{width:"400px","margin-left":"4px"},attrs:{placeholder:"按文献作者;猪种名称;产地搜索"},on:{"on-keyup":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData(t)}},model:{value:e.formValidate.keyword,callback:function(t){e.$set(e.formValidate,"keyword",t)},expression:"formValidate.keyword"}},[i("Button",{staticStyle:{color:"#fff",background:"#2CAEFF"},attrs:{slot:"append",icon:"ios-search"},on:{click:e.getData},slot:"append"})],1)],1),e._v(" "),i("Col",{attrs:{span:"12"}},[i("span",{staticStyle:{color:"#ccc"}},[e._v("(提示：支持多关键词搜索，不同关键词中间用分号隔开)")])])],1)],2),e._v(" "),i("FormItem",{attrs:{label:"发表时间"}},[i("Row",[i("Col",{attrs:{span:"11"}},[i("FormItem",{attrs:{prop:"date"}},[i("DatePicker",{staticStyle:{width:"133px","margin-left":"4px"},attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"Select date"},on:{"on-change":e.changeStartDate},model:{value:e.formValidate.startDate,callback:function(t){e.$set(e.formValidate,"startDate",t)},expression:"formValidate.startDate"}}),e._v(" "),i("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("至")]),e._v(" "),i("DatePicker",{staticStyle:{width:"133px"},attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"Select date"},on:{"on-change":e.changeEndDate},model:{value:e.formValidate.endDate,callback:function(t){e.$set(e.formValidate,"endDate",t)},expression:"formValidate.endDate"}})],1)],1)],1)],1),e._v(" "),i("FormItem",{attrs:{label:"杂交信息",prop:"breedType"}},[i("CheckboxGroup",{on:{"on-change":e.checkAllGroupChange1},model:{value:e.formValidate.breedType,callback:function(t){e.$set(e.formValidate,"breedType",t)},expression:"formValidate.breedType"}},[i("Checkbox",{staticStyle:{width:"130px","margin-left":"4px"},attrs:{value:e.checkAll1},nativeOn:{click:function(t){return t.preventDefault(),e.handleCheckAll1(t)}}},[e._v("全选")]),e._v(" "),i("Checkbox",{staticStyle:{width:"130px"},attrs:{label:1}},[e._v("纯种")]),e._v(" "),i("Checkbox",{staticStyle:{width:"130px"},attrs:{label:2}},[e._v("杂交")]),e._v(" "),i("Checkbox",{staticStyle:{width:"130px"},attrs:{label:4}},[e._v("其他")])],1)],1),e._v(" "),i("FormItem",{attrs:{label:"性别",prop:"animalSex"}},[i("CheckboxGroup",{on:{"on-change":e.checkAllGroupChange2},model:{value:e.formValidate.animalSex,callback:function(t){e.$set(e.formValidate,"animalSex",t)},expression:"formValidate.animalSex"}},[i("Checkbox",{staticStyle:{width:"130px","margin-left":"4px"},attrs:{value:e.checkAll2},nativeOn:{click:function(t){return t.preventDefault(),e.handleCheckAll2(t)}}},[e._v("全选")]),e._v(" "),i("Checkbox",{staticStyle:{width:"130px"},attrs:{label:1}},[e._v("公猪")]),e._v(" "),i("Checkbox",{staticStyle:{width:"130px"},attrs:{label:2}},[e._v("阉公猪")]),e._v(" "),i("Checkbox",{staticStyle:{width:"130px"},attrs:{label:3}},[e._v("母猪")]),e._v(" "),i("Checkbox",{staticStyle:{width:"130px"},attrs:{label:4}},[e._v("其他")])],1)],1),e._v(" "),e._l(e.typeList,function(t,a){return i("FormItem",{key:a,attrs:{label:t.indexTypeName}},[i("div",{staticStyle:{overflow:"hidden",height:"70px",display:"flex","flex-wrap":"wrap"},attrs:{id:"more"+a}},[i("div",{staticStyle:{"margin-left":"4px"}},[i("Checkbox",{staticStyle:{width:"130px"},attrs:{label:"-1"},on:{"on-change":function(i){return e.changeIndexId(t)}},model:{value:t.all,callback:function(i){e.$set(t,"all",i)},expression:"item.all"}},[e._v("全选")])],1),e._v(" "),e._l(t.indexLists,function(a,n){return i("div",{key:n},[i("Poptip",{attrs:{trigger:"hover",placement:"bottom"}},[i("template",{slot:"content"},[i("div",{staticStyle:{width:"380px",display:"flex","flex-wrap":"wrap","justify-content":"space-between"}},e._l(a.indexLists,function(n,l){return i("Checkbox",{key:l,staticStyle:{width:"130px"},attrs:{label:n.indexId},on:{"on-change":function(i){return e.getIndexId2(t,a,a.indexTypeId,n.indexId)}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"item2.checked"}},[e._v(e._s(n.indexName))])}),1)]),e._v(" "),a.indexTypeName?i("Checkbox",{staticStyle:{width:"130px"},on:{"on-change":function(i){return e.getIndexId1(t,a.indexTypeId)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"item1.checked"}},[e._v("\n                "+e._s(a.indexTypeName)+"\n                "),i("span",{staticStyle:{"font-size":"10px",color:"#2db7f5"}},[e._v("(更多)")])]):e._e()],2),e._v(" "),a.indexTypeName?e._e():i("Checkbox",{staticStyle:{width:"130px"},attrs:{label:a.indexId},on:{"on-change":function(i){return e.getIndexId(t,a.indexId)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"item1.checked"}},[e._v(e._s(a.indexName))])],1)})],2),e._v(" "),t.indexLists.length>=14?i("a",{staticStyle:{color:"blue","margin-left":"4px"},attrs:{id:"getAttr"+a},on:{click:function(t){return e.getMore(a)}}},[e._v("查看更多选项")]):e._e()])})],2)],1),e._v(" "),i("div",{staticStyle:{background:"#f5f7f9",width:"1240px",height:"20px","margin-right":"120px"}}),e._v(" "),i("br"),e._v(" "),i("div",[i("div",[e._m(0),e._v(" "),i("div",{staticStyle:{display:"inline-block",float:"right"}},[i("Button",{staticStyle:{width:"97px",height:"40px"},attrs:{type:"info"},on:{click:e.downloadMore}},[e._v("全部下载")])],1)]),e._v(" "),i("br"),e._v(" "),i("div",[i("Table",{ref:"selection",attrs:{border:"",columns:e.columns1,data:e.data1,loading:e.loading},scopedSlots:e._u([{key:"download",fn:function(t){var a=t.row;return t.index,[i("a",{staticStyle:{"margin-top":"2px",width:"60px","font-size":"12px",color:"rgba(19,112,218,1)"},attrs:{size:"small"},on:{click:function(t){return e.download(a.literatureId)}}},[e._v("下载")])]}}])})],1),e._v(" "),i("br"),e._v(" "),i("Row",[i("Col",{staticStyle:{"text-align":"right"},attrs:{span:"24"}},[i("Page",{attrs:{total:e.total,current:e.formValidate.page,"page-size":e.formValidate.pageSize,"show-total":"","show-sizer":"","show-elevator":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{display:"inline-block"}},[t("h1",{staticStyle:{"font-size":"18px"}},[this._v("搜索结果")])])}]};var d=i("VU/8")(l,o,!1,function(e){i("YDn6")},null,null);t.default=d.exports},YDn6:function(e,t){}});
//# sourceMappingURL=36.10dc386fc00ce0e55a2d.js.map