webpackJsonp([12],{PHow:function(t,e){},pBAb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={components:{VueEditor:a("+qPk").a},data:function(){return{obj:{},id:"",fileList:""}},methods:{handleImageAdded:function(t,e,a,i){var o=new FormData;o.append("image",t),this.$axios.post("/api/upload/image",o).then(function(t){var o=t.data.data[0];e.insertEmbed(a,"image",o),i()}).catch(function(t){console.log(t)})},cancel:function(){this.$router.go(-1)},save:function(){var t=this,e=new FormData;return this.obj.title?this.obj.content?(e.append("title",this.obj.title),e.append("content",this.obj.content),e.append("id",this.id),this.obj.fileName&&e.append("fileName",this.obj.fileName),this.obj.fileUrl&&e.append("fileUrl",this.obj.fileUrl),void this.$axios.post("/api/governmentStandard/updateGovernmentStandardById",e).then(function(e){100==e.data.code?(t.$Message.success("编辑成功！"),t.$router.go(-1)):t.$Message.error(e.data.msg)})):(this.$Message.error("请填写内容"),!1):(this.$Message.error("请填写标题"),!1)},getDetail:function(){var t=this,e=new FormData;e.append("id",this.id),this.$axios.post("/api/governmentStandard/getGovernmentStandardById",e).then(function(e){t.obj=e.data.data,t.fileList=e.data.data.fileName})},addFile:function(){var t=this,e="";e=document.getElementById("addFile"),console.log("name",t.name),console.log("addFile",e),e.click(),e.onchange=function(e){console.log(this.files);var a=new FormData;a.append("img",this.files[0]),t.$axios.post("/api/upload/file",a).then(function(e){console.log(e.data),t.obj.fileName=e.data.data.fileName,t.obj.fileUrl=e.data.data.fileUrl,t.fileList=e.data.data.fileName})}}},mounted:function(){this.id=this.$route.query.id,this.getDetail()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{staticClass:"form",attrs:{"label-position":"right","label-width":100}},[a("FormItem",{attrs:{label:"标题：",prop:"name"}},[a("Input",{model:{value:t.obj.title,callback:function(e){t.$set(t.obj,"title",e)},expression:"obj.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"内容：",prop:"name"}},[a("VueEditor",{staticStyle:{width:"100%",height:"auto"},attrs:{useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.obj.content,callback:function(e){t.$set(t.obj,"content",e)},expression:"obj.content"}})],1),t._v(" "),a("FormItem",{attrs:{label:"附件："}},[a("Button",{attrs:{icon:"ios-cloud-upload"},on:{click:t.addFile}},[t._v("上传附件")]),t._v(" "),a("span",[t._v("支持扩展名：.rar .zip .doc .docx .pdf .jpg...")]),t._v(" "),t.fileList?a("div",{staticStyle:{display:"flex","margin-left":"150px"}},[a("span",[t._v(t._s(t.fileList))])]):t._e(),t._v(" "),a("input",{staticStyle:{opacity:"0",height:"0",width:"0"},attrs:{id:"addFile",type:"file",accept:".rar, .zip, .doc, .docx, .pdf, .jpg, .xls"}})],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("Button",{staticStyle:{"margin-right":"100px"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"info"},on:{click:t.save}},[t._v("发布")])],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,o,!1,function(t){a("PHow")},"data-v-c189edf8",null);e.default=n.exports}});
//# sourceMappingURL=12.ec839e1ac0c1bc4cc463.js.map