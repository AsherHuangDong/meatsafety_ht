webpackJsonp([18],{JaAc:function(t,e){},YKh5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"staffManager",data:function(){var t=this;return{msg:"",showDel:!1,isPassword:!1,password:"",selObj:{},columns1:[{title:"用户ID",key:"adminId",align:"center"},{title:"昵称(系统名)",key:"nickname",align:"center"},{title:"描述",key:"adminDescribe",align:"center"},{title:"拥有角色",key:"",align:"center",render:function(t,e){return t("span",{},e.row.role.roleName)}},{title:"账号状态",key:"status",align:"center",render:function(t,e){return t("span",{},1==e.row.isDisable?"启用":"禁用")}},{title:"创建时间",key:"cTime",align:"center"},{title:"操作",key:"status",align:"center",render:function(e,a){return e("div",{},[e("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){t.$router.push({path:"/staffEdit",query:{adminId:a.row.adminId}})}}},"编辑"),e("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){t.isPassword=!0,t.selObj=a.row}}}," 重置密码"),e("a",{style:{color:"#00C1DE","margin-right":"10px"},on:{click:function(){t.showDel=!0,t.selObj=a.row,1==a.row.isDisable?t.msg="禁用":t.msg="启用"}}},1==a.row.isDisable?"禁用":"启用")])}}],total:0,data1:[],search:{page:1,pageSize:10}}},watch:{$route:function(t,e){console.log(e),"staffAdd"!=e.name&&"staffEdit"!=e.name||this.getUsers()}},methods:{getUsers:function(){var t=this,e=new FormData;e.append("page",this.search.page),e.append("pageSize",this.search.pageSize),this.$axios.post("/api/admin/getAdminList",e).then(function(e){console.log(e),t.total=e.data.data.total,t.data1=e.data.data.records,console.log(t.data1)})},changePage:function(t){this.search.page=t,this.getUsers()},changePageSize:function(t){this.search.pageSize=t,this.getUsers()},userAdd:function(){this.$router.push("/staffAdd")},cancel:function(){this.showDel=!1},del:function(){var t=this,e=new FormData;e.append("isDisable",1==this.selObj.isDisable?2:1),e.append("adminId",this.selObj.adminId),this.$axios.post("/api/admin/updateAdminStatus",e).then(function(e){100==e.data.code?(t.showDel=!1,t.$Message.success("已"+t.msg),t.getUsers()):t.$Message.error(e.data.msg)})},cancel1:function(){this.isPassword=!1},save:function(){var t=this,e=new FormData;e.append("password",this.password),e.append("adminId",this.selObj.adminId),this.$axios.post("/api/admin/updatePasswordByAdminId",e).then(function(e){100==e.data.code?(t.isPassword=!1,t.$Message.success("密码修改成功！"),t.getUsers()):t.$Message.error(e.data.msg)})}},mounted:function(){this.getUsers()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.userAdd}},[t._v("添加成员")])],1)],1),t._v(" "),a("br"),t._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",{attrs:{"dis-hover":""}},[a("Row",[a("Table",{ref:"selection",attrs:{border:"",columns:t.columns1,data:t.data1}})],1),t._v(" "),a("br")],1)],1)],1),t._v(" "),a("br"),t._v(" "),a("Row",[a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"24"}},[a("Page",{attrs:{total:t.total,"show-total":"","show-sizer":"","show-elevator":"",current:t.search.page,"page-size":t.search.pageSize},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1),t._v(" "),a("Modal",{attrs:{width:"360","mask-closable":!1,closable:!1},model:{value:t.showDel,callback:function(e){t.showDel=e},expression:"showDel"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),a("span",[t._v("是否"+t._s(t.msg)+"该用户？")])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("p",[t._v(t._s(t.msg)+"后，"+t._s("启用"==t.msg?"该用户可正常登录数据库":"该用户将无法登录数据库"))])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error"},on:{click:t.del}},[t._v(t._s(t.msg))]),t._v(" "),a("Button",{staticStyle:{"margin-left":"40px"},on:{click:t.cancel}},[t._v("取消")])],1)]),t._v(" "),a("Modal",{attrs:{width:"360","mask-closable":!1,closable:!1},model:{value:t.isPassword,callback:function(e){t.isPassword=e},expression:"isPassword"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("重置密码")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[t._v("\n      新密码：\n      "),a("Input",{staticStyle:{width:"200px"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.cancel1}},[t._v("取消")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"40px"},attrs:{type:"info"},on:{click:t.save}},[t._v("确定")])],1)]),t._v(" "),a("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")(s,n,!1,function(t){a("JaAc")},"data-v-52bb2494",null);e.default=i.exports}});
//# sourceMappingURL=18.b63ce2104c53bac92fe0.js.map