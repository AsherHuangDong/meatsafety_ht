webpackJsonp([2],{BO1k:function(e,t,r){e.exports={default:r("fxRn"),__esModule:!0}},fxRn:function(e,t,r){r("+tPU"),r("zQR9"),e.exports=r("g8Ux")},g8Ux:function(e,t,r){var a=r("77Pl"),l=r("3fs2");e.exports=r("FeBl").getIterator=function(e){var t=l(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},hZ6S:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("BO1k"),l=r.n(a),o=r("sY3S"),i={name:"roleedit",data:function(){return{P:[],editRoleParams:{permId:[],roleId:"",roleName:"",roleDesc:""},roleSelect:[]}},methods:{back:function(){this.$router.go(-1)},updateRole:function(){var e=this,t=this.$refs.tree2.getCheckedAndIndeterminateNodes(),r=[];if(0===t.length)return this.$Message.info("所选权限不能为空"),!1;var a=!0,o=!1,i=void 0;try{for(var s,d=l()(t);!(a=(s=d.next()).done);a=!0){var n=s.value;r.push(n.permId.toString())}}catch(e){o=!0,i=e}finally{try{!a&&d.return&&d.return()}finally{if(o)throw i}}console.log("permId",r),this.editRoleParams.permId=r;for(var c=0;c<this.editRoleParams.permId.length;c++)this.editRoleParams.permId[c]=this.editRoleParams.permId[c].toString();var m=new FormData,p=this.editRoleParams.permId.join(",");m.append("roleName",this.editRoleParams.roleName),m.append("roleDesc",this.editRoleParams.roleDesc),m.append("permId",p),m.append("roleId",this.editRoleParams.roleId),this.$axios.post("/api/role/updateRole",m).then(function(t){console.log("/api/role/updateRole",t.data),100===t.data.code?(e.$Message.success("修改成功"),e.clearPermList(),e.$router.go(-1)):e.$Message.error("修改失败")})},getRole:function(){var e=this;(new FormData).append("roleId",this.editRoleParams.roleId),this.$axios.get("/api/role/getRole?roleId="+this.editRoleParams.roleId).then(function(t){console.log("/api/role/getRole",t.data),e.editRoleParams.roleName=t.data.data.roleName,e.editRoleParams.roleDesc=t.data.data.roleDesc,e.editRoleParams.permId=t.data.data.permId;for(var r=[],a=0;a<e.editRoleParams.permId.length;a++)r.push(parseInt(e.editRoleParams.permId[a]));e.editRoleParams.permId=r,console.log(e.editRoleParams),e.disposePermList()})},disposePermList:function(){var e=this.editRoleParams.permId;!function t(r){for(var a=0;a<r.length;a++)r[a].checked=!r[a].children&&-1!==e.indexOf(r[a].permId),r[a].children&&t(r[a].children)}(this.P)},clearPermList:function(){!function e(t){for(var r=0;r<t.length;r++)t[r].checked=!1,t[r].children&&e(t[r].children)}(this.P)}},mounted:function(){this.editRoleParams.roleId=this.$route.query.roleId,this.clearPermList(),this.P=Object(o.a)(),this.getRole()}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content_box"},[r("div",{staticClass:"cont_head"},[r("Breadcrumb",{style:{padding:"14px 24px"}},[r("BreadcrumbItem",{attrs:{to:"/roleadmin"}},[e._v("角色管理")])],1)],1),e._v(" "),r("div",{staticClass:"container"},[r("Row",[r("Col",{attrs:{span:"8",offset:"3"}},[r("Form",{attrs:{"label-width":100}},[r("FormItem",{attrs:{label:"角色名称"}},[r("Input",{staticStyle:{"margin-left":"50px"},model:{value:e.editRoleParams.roleName,callback:function(t){e.$set(e.editRoleParams,"roleName",t)},expression:"editRoleParams.roleName"}})],1),e._v(" "),r("FormItem",{attrs:{label:"角色说明"}},[r("Input",{staticStyle:{"margin-left":"50px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6}},model:{value:e.editRoleParams.roleDesc,callback:function(t){e.$set(e.editRoleParams,"roleDesc",t)},expression:"editRoleParams.roleDesc"}})],1),e._v(" "),r("FormItem",{attrs:{label:"分配权限："}},[r("Tree",{ref:"tree2",staticStyle:{"margin-left":"50px"},attrs:{data:e.P,"check-directly":"","show-checkbox":"",multiple:""}})],1),e._v(" "),r("Col",{attrs:{span:"7",offset:"9"}},[r("Button",{on:{click:e.back}},[e._v("返回")])],1),e._v(" "),r("Col",{attrs:{span:"7"}},[r("Button",{staticStyle:{background:"#00C1DE",color:"#ffffff","border-color":"#00C1DE"},on:{click:e.updateRole}},[e._v("确定")])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var d=r("VU/8")(i,s,!1,function(e){r("xv4L")},"data-v-87e42ece",null);t.default=d.exports},sY3S:function(e,t,r){"use strict";t.a=function(){return[{permValue:"/generalviewshow",permId:1,checked:!1,title:"概览"},{permValue:"/usermanageshow",permId:2,checked:!1,title:"用户管理"},{permValue:"/grouplist",permId:3,checked:!1,title:"小组管理"},{permValue:"/noticelist",permId:4,checked:!1,title:"公告通知"},{children:[{permValue:"/literaturedata",permId:5,checked:!1,title:"文献管理"},{permValue:"/filleddata",permId:6,checked:!1,title:"填报管理"}],permValue:"/datamanage",permId:7,checked:!1,title:"数据管理"},{children:[{permValue:"/kindmanage",permId:8,checked:!1,title:"分类管理"},{permValue:"/targetlist",permId:9,checked:!1,title:"指标管理"}],permValue:"/templatemanage",permId:10,checked:!1,title:"模板管理"},{children:[{permValue:"/staffManager",permId:11,checked:!1,title:"人员管理"},{permValue:"/roleManager",permId:12,checked:!1,title:"角色管理"}],permValue:"/permManager",permId:13,checked:!1,title:"权限管理"},{permValue:"/numberrangelist",permId:14,checked:!1,title:"设置"}]}},xv4L:function(e,t){}});
//# sourceMappingURL=2.a58a297bd5e4694a27a0.js.map